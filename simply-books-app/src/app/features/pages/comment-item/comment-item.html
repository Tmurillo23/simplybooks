<div class="comment" [style.marginLeft.px]="level * 20">
  <div class="comment-header">
    <strong>{{ comment.userId }}</strong>
    <span>{{ comment.createdAt }}</span>
  </div>

  <p>{{ comment.content }}</p>

  <div class="comment-actions">
    <button (click)="parent.replyTo(comment.id)">Responder</button>
    <button (click)="parent.deleteComment(comment.id)">Eliminar</button>
    <button (click)="parent.toggleCommentLike(comment.id)" [class.liked]="parent.hasUserLikedComment(comment.id)">
      ❤️ {{ comment.likes }} Me gusta
    </button>
  </div>

  @if (parent.replyingTo === comment.id) {
    <div class="reply-form" [style.marginLeft.px]="(level + 1) * 20">
      <textarea
        [(ngModel)]="parent.newComment"
        rows="2"
        placeholder="Escribe tu respuesta..."
      ></textarea>
      <div class="reply-actions">
        <button (click)="parent.addComment()">Enviar</button>
        <button (click)="parent.cancelReply()">Cancelar</button>
      </div>
    </div>
  }

  <!-- Renderizado recursivo de respuestas -->
  @if (comment.replies.length > 0) {
    @for (reply of comment.replies; track reply.id) {
      <app-comment-item
        [comment]="reply"
        [replyingTo]="replyingTo"
        [newComment]="newComment"
        [level]="level + 1"
      ></app-comment-item>
    }
  }
</div>

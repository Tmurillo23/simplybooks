<div class="profile-container">

  <!-- Encabezado de perfil -->
  <header class="profile-header">
    <img
      class="profile-pic"
      [src]="user().avatar || '/assets/default-avatar.png'"
      [alt]="user().username">

    <div class="profile-info">
      <h2 class="username">{{ user().username }}</h2>
      <p class="bio" [class.hidden]="!user().biography">
        {{ user().biography || 'Este usuario aún no ha agregado una biografía.' }}
      </p>
    </div>
  </header>

  <!-- Estadísticas del usuario -->
  <section class="stats-container">
    <div class="stat-item">
      <div class="stat-value">{{ stats().booksRead }}</div>
      <div class="stat-label">Libros leídos</div>
    </div>

    <div class="stat-item">
      <div class="stat-value">{{ stats().reviewsCount }}</div>
      <div class="stat-label">Reseñas</div>
    </div>

    <a [routerLink]="['/followers']" class="stat-item link-item">
      <div class="stat-value">{{ stats().followersCount }}</div>
      <div class="stat-label">Seguidores</div>
    </a>

    <a [routerLink]="['/following']" class="stat-item link-item">
      <div class="stat-value">{{ stats().followingCount }}</div>
      <div class="stat-label">Siguiendo</div>
    </a>
  </section>

  <!-- Datos de la cuenta -->
  <section class="profile-form">
    <div class="form-group">
      <label for="email">Correo</label>
      <input id="email" type="email" [value]="user().email" readonly>
    </div>

    <div class="form-group">
      <label for="username">Usuario</label>
      <input id="username" type="text" [value]="user().username" readonly>
    </div>

    <button type="button" class="btn-primary" [routerLink]="['/update-profile']">
      Editar perfil
    </button>
  </section>
</div>

<!-- Secciones del perfil -->
<div class="profile-sections">

  <!-- LIBRERÍA -->
  <section class="profile-card">
    <h3 class="section-title">
      <a [routerLink]="goTo('library')">Mi Librería</a>
    </h3>

    <ul class="item-list">
      @for (book of recentLibrary; track book.id) {
        <li>
          <a [routerLink]="goToItem('library', book.id)">
            <img [src]="book.portrait_url || '/assets/book-placeholder.png'" alt="{{ book.title }}">
            <span>{{ book.title }}</span>
          </a>
        </li>
      }
      @empty {
        <li class="empty-message">Aún no hay libros en tu librería</li>
      }
    </ul>
  </section>

  <!-- RESEÑAS -->
  <section class="profile-card">
    <h3 class="section-title">
      <a [routerLink]="goTo('reviews')">Mis Reseñas</a>
    </h3>

    <ul class="item-list">
      @for (review of recentReviews; track review.id) {
        <li>
          <a [routerLink]="goToItem('reviews', review.id)">
            {{ review.title }}
          </a>
        </li>
      }
      @empty {
        <li class="empty-message">Aún no has publicado reseñas</li>
      }
    </ul>
  </section>

  <!-- COLECCIONES -->
  <section class="profile-card">
    <h3 class="section-title">
      <a [routerLink]="goTo('collections')">Mis Colecciones</a>
    </h3>

    <ul class="item-list">
      @for (col of recentCollections; track col.id) {
        <li>
          <a [routerLink]="goToItem('collections', col.id)">
            {{ col.name }}
          </a>
        </li>
      }
      @empty {
        <li class="empty-message">Aún no has creado colecciones</li>
      }
    </ul>
  </section>
</div>
